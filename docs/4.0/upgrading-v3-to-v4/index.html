<!doctype html>
<html class="docs-version-4.0" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="MikroORM Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="MikroORM Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-135618258-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-135618258-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="MikroORM" href="/opensearch.xml">
<script src="/js/custom.js"></script><title data-react-helmet="true">Upgrading from v3 to v4 | MikroORM</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://mikro-orm.io/docs/4.0/upgrading-v3-to-v4"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="4.0"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-4.0"><meta data-react-helmet="true" property="og:title" content="Upgrading from v3 to v4 | MikroORM"><meta data-react-helmet="true" name="description" content="Following sections describe (hopefully) all breaking changes, most of them might be not valid"><meta data-react-helmet="true" property="og:description" content="Following sections describe (hopefully) all breaking changes, most of them might be not valid"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://mikro-orm.io/docs/4.0/upgrading-v3-to-v4"><link data-react-helmet="true" rel="alternate" href="https://mikro-orm.io/docs/4.0/upgrading-v3-to-v4" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://mikro-orm.io/docs/4.0/upgrading-v3-to-v4" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.9eb02b9f.css">
<link rel="preload" href="/assets/js/runtime~main.57c82f4c.js" as="script">
<link rel="preload" href="/assets/js/main.cff44dfc.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" role="banner"><div class="announcementBarPlaceholder_2m9F"></div><div class="announcementBarContent_3EUC">‚≠êÔ∏è If you like MikroORM, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/mikro-orm/mikro-orm">GitHub</a> and consider <a target="_blank" rel="noopener noreferrer" href="https://github.com/sponsors/B4nan">sponsoring</a> its development! ‚≠êÔ∏è</div><button type="button" class="clean-btn close announcementBarClose_38nx" aria-label="Close"><svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="MikroORM" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="MikroORM" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/docs/4.0/installation">4.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/upgrading-v3-to-v4">Next</a></li><li><a class="dropdown__link" href="/docs/upgrading-v3-to-v4">4.5</a></li><li><a class="dropdown__link" href="/docs/4.4/upgrading-v3-to-v4">4.4</a></li><li><a class="dropdown__link" href="/docs/4.3/upgrading-v3-to-v4">4.3</a></li><li><a class="dropdown__link" href="/docs/4.2/upgrading-v3-to-v4">4.2</a></li><li><a class="dropdown__link" href="/docs/4.1/upgrading-v3-to-v4">4.1</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/4.0/upgrading-v3-to-v4">4.0</a></li><li><a class="dropdown__link" href="/docs/3.6/upgrading-v3-to-v4">3.6</a></li><li><a class="dropdown__link" href="/docs/2.7/installation">2.7</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/installation">Docs</a><a class="navbar__item navbar__link" href="/docs/api">API</a><a class="navbar__item navbar__link" href="/docs/faq">FAQ</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" data-type="versions" href="/versions">latest: v4.5.9</a><a href="https://join.slack.com/t/mikroorm/shared_invite/enQtNTM1ODYzMzM4MDk3LWM4ZDExMjU5ZDhmNjA2MmM3MWMwZmExNjhhNDdiYTMwNWM0MGY5ZTE3ZjkyZTMzOWExNDgyYmMzNDE1NDI5NjA" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" title="Chat on Slack"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/mikro-orm/mikro-orm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" title="View on GitHub"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://twitter.com/MikroORM" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" title="Twitter"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for MikroORM <b>4.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/upgrading-v3-to-v4">latest version</a></b> (4.5).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 4.0</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Upgrading from v3 to v4</h1></header><blockquote><p>Following sections describe (hopefully) all breaking changes, most of them might be not valid
for you, like if you do not use custom <code>NamingStrategy</code> implementation, you do not care about
the interface being changed.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="node-10130-required"></a>Node 10.13.0+ required<a class="hash-link" href="#node-10130-required" title="Direct link to heading">#</a></h2><p>Support for older node versions was dropped. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="typescript-37-required"></a>TypeScript 3.7+ required<a class="hash-link" href="#typescript-37-required" title="Direct link to heading">#</a></h2><p>Support for older TypeScript versions was dropped. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="monorepo"></a>Monorepo<a class="hash-link" href="#monorepo" title="Direct link to heading">#</a></h2><p>The ORM has been split into several packages. In v4 one needs to require
<code>@mikro-orm/core</code> and a driver package, e.g. <code>@mikro-orm/mysql</code>. This driver
package already contains the <code>mysql2</code> dependency, so you can remove that from
your <code>package.json</code>. </p><ul><li><code>@mikro-orm/core</code></li><li><code>@mikro-orm/reflection</code> - <code>TsMorphMetadataProvider</code></li><li><code>@mikro-orm/cli</code> - CLI support, requires entity-generator, migrator and knex</li><li><code>@mikro-orm/knex</code> - SQL support</li><li><code>@mikro-orm/entity-generator</code></li><li><code>@mikro-orm/migrations</code></li><li><code>@mikro-orm/mysql</code></li><li><code>@mikro-orm/mariadb</code></li><li><code>@mikro-orm/mysql-base</code> - Common implementation for mysql and mariadb (internal)</li><li><code>@mikro-orm/sqlite</code></li><li><code>@mikro-orm/postgresql</code></li><li><code>@mikro-orm/mongodb</code></li></ul><blockquote><p>For easier transition, meta package mikro-orm is still present, reexporting
core, reflection, migrations, entity-generator and cli packages. You should
<strong>not</strong> install both <code>mikro-orm</code> and <code>@mikro-orm/core</code> packages together. </p></blockquote><blockquote><p>You should prefer the <code>@mikro-orm/core</code> over <code>mikro-orm</code> package, there were
weird dependency issues reported with the <code>mikro-orm</code> meta-package. </p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="default-metadata-provider-is-now-reflectmetadataprovider"></a>Default metadata provider is now <code>ReflectMetadataProvider</code><a class="hash-link" href="#default-metadata-provider-is-now-reflectmetadataprovider" title="Direct link to heading">#</a></h2><p>If you want to use ts-morph, you need to install <code>@mikro-orm/reflection</code> package
and enable the provider explicitly in the ORM config, as described <a href="/docs/4.0/metadata-providers#tsmorphmetadataprovider">here</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">TsMorphMetadataProvider</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@mikro-orm/reflection&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token maybe-class-name">MikroORM</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  metadataProvider</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">TsMorphMetadataProvider</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Using <code>ReflectMetadataProvider</code> has some limitations, so be sure to read
about them <a href="/docs/4.0/metadata-providers#limitations-and-requirements">here</a>.</p><p>One common gotcha with <code>reflect-metadata</code> is that you need to explicitly
state the property type when using property initializer:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Property</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">createdAt</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Without the explicit type, we would infer <code>Object</code> instead of <code>Date</code>,
which would be most probably mapped to JSON column type (depends on driver).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="sqlentitymanager-and-mongoentitymanager"></a>SqlEntityManager and MongoEntityManager<a class="hash-link" href="#sqlentitymanager-and-mongoentitymanager" title="Direct link to heading">#</a></h2><p>In v4 the <code>core</code> package, where <code>EntityManager</code> and <code>EntityRepository</code> are
defined, is not dependent on knex, and therefore it cannot have a method
returning a <code>QueryBuilder</code>. You need to import the SQL flavour of the EM
from the driver package to access the <code>createQueryBuilder()</code> method.</p><blockquote><p>The SQL flavour of EM is actually called <code>SqlEntityManager</code>, it is exported both under
this name and under <code>EntityManager</code> alias, so you can just change the
location from where you import.</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">EntityManager</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@mikro-orm/mysql&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// or any other SQL driver package</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> em</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">EntityManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> qb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> em</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createQueryBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Same applies for the <code>aggregate()</code> method in mongo driver:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">EntityManager</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@mikro-orm/mongodb&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> em</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">EntityManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> em</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">aggregate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p>The mongo flavour of EM is actually called <code>MongoEntityManager</code>, it is exported both under
this name and under <code>EntityManager</code> alias, so you can just change the
location from where you import.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="different-default-pivottable"></a>Different default <code>pivotTable</code><a class="hash-link" href="#different-default-pivottable" title="Direct link to heading">#</a></h2><p>Implementation of <code>UnderscoreNamingStrategy</code> and <code>EntityCaseNamingStrategy</code>
<code>joinTableName()</code> method has changed. You can use <code>pivotTable</code> on the owning side
of M:N relation to specify the table name manually. </p><p>Previously the table name did not respect property name, if one defined multiple
M:N relations between same entities, there were conflicts and one would have to
specify <code>pivotTable</code> name manually at least on one of them. With the new way,
we can be sure that the table name won&#x27;t conflict with other pivot tables. </p><p>Previously the name was constructed from 2 entity names as <code>entity_a_to_entity_b</code>,
ignoring the actual property name. In v4 the name will be <code>entity_a_coll_name</code> in
case of the collection property on the owning side being named <code>collName</code>. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="changes-in-folder-based-discovery-entitiesdirs-removed"></a>Changes in folder-based discovery (<code>entitiesDirs</code> removed)<a class="hash-link" href="#changes-in-folder-based-discovery-entitiesdirs-removed" title="Direct link to heading">#</a></h2><p><code>entitiesDirs</code> and <code>entitiesDirsTs</code> were removed in favour of <code>entities</code> and <code>entitiesTs</code>,
<code>entities</code> will be used as a default for <code>entitiesTs</code> (that is used when we detect <code>ts-node</code>).</p><p><code>entities</code> can now contain mixture of paths to directories, globs pointing to entities,
or references to the entities or instances of <code>EntitySchema</code>. </p><p>This basically means that all you need to change is renaming <code>entitiesDirs</code> to <code>entities</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">MikroORM</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  entities</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;dist/**/entities&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dist/**/*.entity.js&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">FooBar</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">FooBaz</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  entitiesTs</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;src/**/entities&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;src/**/*.entity.ts&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">FooBar</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">FooBaz</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="changes-in-wrap-helper-wrappedentity-interface-and-reference-wrapper"></a>Changes in <code>wrap()</code> helper, <code>WrappedEntity</code> interface and <code>Reference</code> wrapper<a class="hash-link" href="#changes-in-wrap-helper-wrappedentity-interface-and-reference-wrapper" title="Direct link to heading">#</a></h2><p>Previously all the methods and properties of <code>WrappedEntity</code> interface were
added to the entity prototype during discovery. In v4 there is only one property
added: <code>__helper: WrappedEntity</code>. <code>WrappedEntity</code> has been converted to actual class.</p><p><code>wrap(entity)</code> no longer returns the entity, now the <code>WrappedEntity</code> instance is
being returned. It contains only public methods (<code>init</code>, <code>assign</code>, <code>isInitialized</code>, ...),
if you want to access internal properties like <code>__meta</code> or <code>__em</code>, you need to explicitly
ask for the helper via <code>wrap(entity, true)</code>.</p><p>Internal methods (with <code>__</code> prefix) were also removed from the <code>Reference</code> class,
use <code>wrap(ref, true)</code> to access them. </p><p>Instead of interface merging with <code>WrappedEntity</code>, one can now use classic inheritance,
by extending <code>BaseEntity</code> exported from <code>@mikro-orm/core</code>. If you do so, <code>wrap(entity)</code>
will return your entity. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="removed-flush-parameter-from-persist-and-remove-methods"></a>Removed <code>flush</code> parameter from <code>persist()</code> and <code>remove()</code> methods<a class="hash-link" href="#removed-flush-parameter-from-persist-and-remove-methods" title="Direct link to heading">#</a></h2><p><code>flush</code> param is removed, both <code>persist</code> and <code>remove</code> methods are synchronous and
require explicit flushing, possibly via fluent interface call.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// before</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> em</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">persist</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">jon</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> em</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">remove</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Author</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> jon</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// after</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> em</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">persist</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">jon</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">flush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> em</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">remove</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">jon</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">flush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="remove-method-requires-entity-instances"></a><code>remove()</code> method requires entity instances<a class="hash-link" href="#remove-method-requires-entity-instances" title="Direct link to heading">#</a></h2><p>The <code>em.remove()</code> method originally allowed to pass either entity instance, or
a condition. When one passed a condition, it was firing a native delete query,
without handling transactions or hooks. </p><p>In v4, the method is now simplified and works only with entity instances. Use
<code>em.nativeDelete()</code> explicitly if you want to fire a delete query instead of
letting the <code>UnitOfWork</code> doing its job.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// before</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> em</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">remove</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Author</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// fires query directly</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// after </span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> em</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">nativeDelete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Author</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><code>em.removeEntity()</code> has been removed in favour of <code>em.remove()</code> (that now has almost the same signature).</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="type-safe-references"></a>Type safe references<a class="hash-link" href="#type-safe-references" title="Direct link to heading">#</a></h2><p>EM now returns <code>Loaded&lt;T, P&gt;</code> instead of the entity (<code>T</code>). This type automatically
adds synchronous method <code>get()</code> that returns the entity (for references) or array
of entities (for collections).</p><p><code>Reference.get()</code> is now available only with correct <code>Loaded</code> type hint and is used
as a sync getter for the entity, just like <code>unwrap()</code>. You can use <code>Reference.load(prop)</code>
for the original <code>get()</code> method functionality. </p><p><code>em.find()</code> and similar methods now have two type arguments, due to TypeScript not supporting partial
type inference, when you specify the <code>T</code> explicitly (without also explicitly
specifying the load hint), the inference will not work. This use case was mainly
for usage without classes (interfaces + <code>EntitySchema</code>) - in that case it is now
supported to pass actual instance of <code>EntitySchema</code> as the first parameter to these
methods, that will allow correct type inference:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> author </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> em</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">AuthorSchema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;books&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">author</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">books</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// `get()` is now inferred correctly</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="custom-types-are-now-type-safe"></a>Custom types are now type safe<a class="hash-link" href="#custom-types-are-now-type-safe" title="Direct link to heading">#</a></h2><p>Generic <code>Type</code> class has now two type arguments - the input and output types.
Input type defaults to <code>string</code>, output type defaults to the input type. </p><p>You might need to explicitly provide the types if your methods are strictly typed.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="custom-type-serialization"></a>Custom type serialization<a class="hash-link" href="#custom-type-serialization" title="Direct link to heading">#</a></h2><p>Custom types used to be serialized to the database value. In v4, the runtime
value is used by default. Implement custom <code>toJSON()</code> method if you need to
customize this.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="property-default-and-defaultraw"></a>Property <code>default</code> and <code>defaultRaw</code><a class="hash-link" href="#property-default-and-defaultraw" title="Direct link to heading">#</a></h2><p>Previously the <code>default</code> option of properties was used as is, so we had to wrap
strings in quotes (e.g. <code>@Property({ default: &quot;&#x27;foo bar&#x27;&quot; })</code>). </p><p>In v4 the <code>default</code> is typed as <code>string | number | boolean | null</code> and when used
with string value, it will be automatically quoted. </p><p>To use SQL functions we now need to use <code>defaultRaw</code>: <code>@Property({ defaultRaw: &#x27;now()&#x27; })</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="autoflush-option-has-been-removed"></a><code>autoFlush</code> option has been removed<a class="hash-link" href="#autoflush-option-has-been-removed" title="Direct link to heading">#</a></h2><p>Also <code>persistLater()</code> and <code>removeLater()</code> methods are deprecated. Use <code>persist()</code> or
<code>remove</code> respectively.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="identity-uuidentity-and-mongoentity-interfaces-are-removed"></a><code>IdEntity</code>, <code>UuidEntity</code> and <code>MongoEntity</code> interfaces are removed<a class="hash-link" href="#identity-uuidentity-and-mongoentity-interfaces-are-removed" title="Direct link to heading">#</a></h2><p>They were actually never needed. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="mongodb-driver-is-no-longer-the-default"></a>MongoDB driver is no longer the default<a class="hash-link" href="#mongodb-driver-is-no-longer-the-default" title="Direct link to heading">#</a></h2><p>You need to specify the platform type either via <code>type</code> option or provide the driver
implementation via <code>driver</code> option. </p><p>Available platforms types: <code>[ &#x27;mongo&#x27;, &#x27;mysql&#x27;, &#x27;mariadb&#x27;, &#x27;postgresql&#x27;, &#x27;sqlite&#x27; ]</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="removed-configuration-discoverytsconfigpath"></a>Removed configuration <code>discovery.tsConfigPath</code><a class="hash-link" href="#removed-configuration-discoverytsconfigpath" title="Direct link to heading">#</a></h2><p>Removed as it is no longer needed, it was used only for <code>TsMorphMetadataProvider</code>,
when the <code>entitiesDirsTs</code> were not explicitly provided. In v4, this is no longer
needed, as ts-morph discovery will use <code>d.ts</code> files instead, that should be located
next to the compiled entities. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="changes-in-query-highlighting"></a>Changes in query highlighting<a class="hash-link" href="#changes-in-query-highlighting" title="Direct link to heading">#</a></h2><p>Previously Highlight.js was used to highlight various things in the CLI,
like SQL and mongo queries, or migrations or entities generated via CLI.
While the library worked fine, it was causing performance issues mainly
for those bundling via webpack and using lambdas, as the library was huge.</p><p>In v4 highlighting is disabled by default, and there are 2 highlighters
you can optionally use (you need to install them first).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">SqlHighlighter</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@mikro-orm/sql-highlighter&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">MikroORM</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  highlighter</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">SqlHighlighter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For MongoDB you can use <code>@mikro-orm/mongo-highlighter</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/mikro-orm/mikro-orm/edit/master/docs/versioned_docs/version-4.0/upgrading-v3-to-v4.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"><span class="theme-last-updated">Last updated on <b><time datetime="2021-10-11T01:41:19.000Z">10/11/2021</time></b> by <b>Renovate Bot</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#node-10130-required" class="table-of-contents__link">Node 10.13.0+ required</a></li><li><a href="#typescript-37-required" class="table-of-contents__link">TypeScript 3.7+ required</a></li><li><a href="#monorepo" class="table-of-contents__link">Monorepo</a></li><li><a href="#default-metadata-provider-is-now-reflectmetadataprovider" class="table-of-contents__link">Default metadata provider is now <code>ReflectMetadataProvider</code></a></li><li><a href="#sqlentitymanager-and-mongoentitymanager" class="table-of-contents__link">SqlEntityManager and MongoEntityManager</a></li><li><a href="#different-default-pivottable" class="table-of-contents__link">Different default <code>pivotTable</code></a></li><li><a href="#changes-in-folder-based-discovery-entitiesdirs-removed" class="table-of-contents__link">Changes in folder-based discovery (<code>entitiesDirs</code> removed)</a></li><li><a href="#changes-in-wrap-helper-wrappedentity-interface-and-reference-wrapper" class="table-of-contents__link">Changes in <code>wrap()</code> helper, <code>WrappedEntity</code> interface and <code>Reference</code> wrapper</a></li><li><a href="#removed-flush-parameter-from-persist-and-remove-methods" class="table-of-contents__link">Removed <code>flush</code> parameter from <code>persist()</code> and <code>remove()</code> methods</a></li><li><a href="#remove-method-requires-entity-instances" class="table-of-contents__link"><code>remove()</code> method requires entity instances</a></li><li><a href="#type-safe-references" class="table-of-contents__link">Type safe references</a></li><li><a href="#custom-types-are-now-type-safe" class="table-of-contents__link">Custom types are now type safe</a></li><li><a href="#custom-type-serialization" class="table-of-contents__link">Custom type serialization</a></li><li><a href="#property-default-and-defaultraw" class="table-of-contents__link">Property <code>default</code> and <code>defaultRaw</code></a></li><li><a href="#autoflush-option-has-been-removed" class="table-of-contents__link"><code>autoFlush</code> option has been removed</a></li><li><a href="#identity-uuidentity-and-mongoentity-interfaces-are-removed" class="table-of-contents__link"><code>IdEntity</code>, <code>UuidEntity</code> and <code>MongoEntity</code> interfaces are removed</a></li><li><a href="#mongodb-driver-is-no-longer-the-default" class="table-of-contents__link">MongoDB driver is no longer the default</a></li><li><a href="#removed-configuration-discoverytsconfigpath" class="table-of-contents__link">Removed configuration <code>discovery.tsConfigPath</code></a></li><li><a href="#changes-in-query-highlighting" class="table-of-contents__link">Changes in query highlighting</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/installation">Installation &amp; Usage</a></li><li class="footer__item"><a href="https://github.com/mikro-orm/mikro-orm#-quick-start" target="_blank" rel="noopener noreferrer" class="footer__link-item">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/upgrading-v3-to-v4">Migration from v3 to v4</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/3.6/installation">Version 3.6 docs</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://join.slack.com/t/mikroorm/shared_invite/enQtNTM1ODYzMzM4MDk3LWM4ZDExMjU5ZDhmNjA2MmM3MWMwZmExNjhhNDdiYTMwNWM0MGY5ZTE3ZjkyZTMzOWExNDgyYmMzNDE1NDI5NjA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/ask?tags=mikro-orm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://twitter.com/MikroOrm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><iframe src="https://ghbtns.com/github-btn.html?user=mikro-orm&amp;repo=mikro-orm&amp;type=star&amp;count=true" style="margin-top:10px" frameborder="0" scrolling="0" width="150" height="30" title="GitHub Stars"></iframe></li><li class="footer__item"><iframe src="https://ghbtns.com/github-btn.html?user=B4nan&amp;type=sponsor" frameborder="0" scrolling="0" width="150" height="30" title="Sponsor B4nan"></iframe></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="MikroORM" src="/img/logo-header.svg"></div>Copyright ¬© 2018-2021 Martin Ad√°mek. Built with Docusaurus. Icons made by <a href="https://www.flaticon.com/authors/surang" title="surang">surang</a> and <a href="https://www.flaticon.com/authors/skyclick" title="Skyclick">Skyclick</a>.</div></div></footer></div>
<script src="/assets/js/runtime~main.57c82f4c.js"></script>
<script src="/assets/js/main.cff44dfc.js"></script>
</body>
</html>